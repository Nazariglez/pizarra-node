// Generated by CoffeeScript 1.3.3
(function(){var e,t;t=function(){return Modernizr.canvas},e=function(){var e,n,r,i,s;r=function(){var t,r,o,u,a,f;return r=function(){return n.fillStyle="green",n.fillRect(0,0,s.width,s.height)},f=function(e){return n.beginPath(),n.strokeStyle="#fff",n.lineCap="round",n.lineWidth=5,n.moveTo(e.clientX-s.offsetLeft,e.clientY-s.offsetTop)},u=function(e){return n.closePath()},a=function(e){return n.lineTo(e.clientX-s.offsetLeft,e.clientY-s.offsetTop),n.stroke()},r(),o=!1,t=!1,i.on("connect",function(){return e.addEventListener("click",function(){if(!t)return i.emit("clean",!0)},!1),s.addEventListener("mousedown",function(e){if(!t)return i.emit("startLine",{clientX:e.clientX,clientY:e.clientY}),o=!0,f(e)},!1),window.addEventListener("mouseup",function(e){if(!t)return i.emit("closeLine",{clientX:e.clientX,clientY:e.clientY}),o=!1,u(e)},!1),s.addEventListener("mousemove",function(e){if(o&&!t)return i.emit("draw",{clientX:e.clientX,clientY:e.clientY}),a(e)},!1),i.on("down",function(e){if(!o)return t=!0,f(e)}),i.on("up",function(e){if(!o)return t=!1,u(e)}),i.on("move",function(e){if(t)return a(e)}),i.on("clean",r)})};if(t())return s=document.getElementById("canvas"),n=s.getContext("2d"),e=document.getElementById("clean"),i=io.connect("/"),r()},window.onload=function(){return e()}}).call(this);